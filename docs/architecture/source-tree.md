# Source Tree Structure

Clean layout of the repository so new contributors can find the right place to work.

```
video_window/
├── video_window_server/                # Serverpod backend (modular monolith)
│   ├── config/                         # Environment configs
│   ├── lib/
│   │   └── src/
│   │       ├── endpoints/              # API endpoints per module
│   │       ├── generated/              # Serverpod-generated code
│   │       ├── protocol/               # YAML schemas + migrations
│   │       └── utilities/              # Shared backend helpers
│   ├── migrations/                     # PostgreSQL migration scripts
│   └── pubspec.yaml
├── video_window_client/                # Generated client SDK (read-only)
├── video_window_shared/                # Generated protocol models (read-only)
├── video_window_flutter/               # Flutter Melos workspace
│   ├── lib/
│   │   ├── main.dart                   # Application entry point
│   │   ├── app.dart                    # App configuration & DI wiring
│   │   └── presentation/
│   │       ├── bloc/                   # Global BLoCs (auth, app shell)
│   │       └── routing/                # Top-level navigation
│   └── packages/
│       ├── core/                       # Data access layer (no feature domain)
│       │   ├── lib/
│       │   │   ├── data/               # All infrastructure-facing code
│       │   │   │   ├── datasources/    # Serverpod + local data sources
│       │   │   │   ├── repositories/   # Repository implementations
│       │   │   │   ├── services/       # Cross-cutting services (auth, storage)
│       │   │   │   └── models/         # DTOs / data transfer classes
│       │   └── pubspec.yaml
│       ├── shared/                     # Cross-feature UI + business helpers
│       │   ├── lib/
│       │   │   ├── design_system/      # Tokens, themes, reusable widgets
│       │   │   ├── domain/             # Shared business logic
│       │   │   │   ├── entities/
│       │   │   │   ├── value_objects/
│       │   │   │   └── use_cases/
│       │   │   └── services/           # Cross-cutting flows (analytics, tracking)
│       │   └── pubspec.yaml
│       └── features/                   # Feature packages (presentation + feature domain)
│           ├── auth/
│           │   ├── lib/
│           │   │   ├── domain/
│           │   │   │   ├── entities/   # Feature entities & aggregates
│           │   │   │   ├── value_objects/ # Validated value types
│           │   │   │   └── use_cases/  # Feature use cases
│           │   │   └── presentation/   # bloc/, pages/, widgets/
│           │   └── pubspec.yaml
│           ├── timeline/               # Same structure as auth
│           │   ├── lib/
│           │   │   ├── domain/
│           │   │   │   ├── entities/
│           │   │   │   ├── value_objects/
│           │   │   │   └── use_cases/
│           │   │   └── presentation/
│           │   └── pubspec.yaml
│           ├── commerce/
│           │   ├── lib/
│           │   │   ├── domain/
│           │   │   │   ├── entities/
│           │   │   │   ├── value_objects/
│           │   │   │   └── use_cases/
│           │   │   └── presentation/
│           │   └── pubspec.yaml
│           ├── publishing/
│           │   ├── lib/
│           │   │   ├── domain/
│           │   │   │   ├── entities/
│           │   │   │   ├── value_objects/
│           │   │   │   └── use_cases/
│           │   │   └── presentation/
│           │   └── pubspec.yaml
│           └── notifications/
│               ├── lib/
│               │   ├── domain/
│               │   │   ├── entities/
│               │   │   ├── value_objects/
│               │   │   └── use_cases/
│               │   └── presentation/
│               └── pubspec.yaml
├── docs/                               # Product & architecture documentation
│   ├── architecture/
│   ├── prd.md
│   └── testing/
├── tools/                              # Scripts and supporting tooling
├── melos.yaml                          # Workspace configuration
├── pubspec.yaml                        # Root Dart configuration
└── README.md
```

### Service Folder Roles

- `core/lib/data/services/` handles infrastructure concerns (auth tokens, network guards, storage bridges) that sit next to repositories.
- `shared/lib/services/` hosts cross-feature business helpers used by multiple features (analytics, feature flags, notification routing).

## Key Boundaries

- `video_window_client/` and `video_window_shared/` are regenerated by `serverpod generate`; do not edit by hand.
- Feature packages contain only `use_cases/` and `presentation/` folders. All data access stays inside `packages/core/`.
- Shared design assets live in `packages/shared/` to keep UI consistent across features.
- Run all Melos commands from the `video_window_flutter/` directory.

## Quick Workflow Snapshot

1. `cd video_window/video_window_flutter`
2. `melos run setup` (first time) or `melos run generate` (after model changes)
3. Implement or update code in the appropriate `core`, `shared`, or feature package
4. `melos run test` and `melos run analyze` before raising a PR
5. If backend protocol changes, run `serverpod generate` inside `video_window_server/`

These guardrails keep the Flutter workspace in sync with the Serverpod backend while enforcing clean, testable boundaries.