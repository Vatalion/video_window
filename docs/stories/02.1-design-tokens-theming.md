# Story 02.1: Design Tokens & Theming System

**Epic:** 02 - Core Platform Services  
**Story ID:** 02.1  
**Created:** 2025-10-30  
**Status:** Ready for Development

---

## User Story

**As a** product designer,  
**I want** baseline typography, color, and spacing tokens available in Flutter,  
**so that** the app presents a cohesive visual language before feature work begins.

---

## Business Value

Establishes the design foundation that all features will build upon, ensuring brand consistency and reducing technical debt from hardcoded values.

**Priority:** P0 (Critical - Foundation)

---

## Acceptance Criteria

1. **Light/Dark Theme Definitions:**
   - Light and dark color palettes defined with semantic naming (primary, secondary, surface, error, etc.)
   - Typography scales defined (headings, body, captions) with font families, sizes, weights
   - Spacing constants defined (xs, s, m, l, xl, xxl) using 4px/8px grid system
   - Export via central Theme extension accessible throughout app

2. **Token Documentation:**
   - Document token usage in `docs/architecture/coding-standards.md` with examples
   - Include visual reference guide showing all colors, typography, and spacing
   - Provide code examples for consuming tokens in widgets

3. **Sample Implementation:**
   - Splash screen consumes tokens without hardcoded colors
   - Placeholder feed screen uses typography and spacing tokens
   - Theme switching functionality working (light/dark mode)

4. **Accessibility Compliance:**
   - Color contrast ratios meet WCAG 2.1 AA standards (4.5:1 for normal text, 3:1 for large text)
   - Typography scales support dynamic type/font scaling
   - Touch targets meet 44x44pt minimum requirement

---

## Tasks / Subtasks

- [ ] **Task 1**: Define Color Palette (AC: 1, 4)
  - [ ] Define light theme colors with semantic names
  - [ ] Define dark theme colors ensuring sufficient contrast
  - [ ] Verify WCAG AA compliance for all color combinations
  - [ ] Export as `AppColors` extension

- [ ] **Task 2**: Define Typography System (AC: 1, 4)
  - [ ] Define font families (primary: Inter, secondary: SF Pro)
  - [ ] Define type scale (display, headline, title, body, label, caption)
  - [ ] Define font weights and line heights
  - [ ] Export as `AppTypography` extension
  - [ ] Test dynamic type scaling on iOS/Android

- [ ] **Task 3**: Define Spacing & Layout (AC: 1)
  - [ ] Define spacing scale using 4px/8px grid
  - [ ] Define border radius values (xs, s, m, l, xl, full)
  - [ ] Define elevation/shadow values
  - [ ] Export as `AppSpacing` extension

- [ ] **Task 4**: Create Theme Extension (AC: 1, 3)
  - [ ] Implement `AppTheme` extension combining all tokens
  - [ ] Wire up light/dark theme switching via `ThemeMode`
  - [ ] Provide `AppTheme.of(context)` accessor pattern

- [ ] **Task 5**: Documentation & Examples (AC: 2)
  - [ ] Document in coding-standards.md with usage examples
  - [ ] Create visual reference guide (Figma export or Flutter app)
  - [ ] Add code examples to architecture docs

- [ ] **Task 6**: Sample Screens (AC: 3)
  - [ ] Update splash screen to use tokens
  - [ ] Create placeholder feed screen using tokens
  - [ ] Verify no hardcoded colors/sizes remain

---

## Dependencies

- **Technical:** Flutter 3.19.6 setup complete
- **Business:** Design team provides color palette and typography specifications
- **Prerequisites:** Epic 01.1 (Repository bootstrap) complete

---

## Out of Scope

- Complete component library (deferred to shared package work)
- Animation tokens and motion design system
- Iconography system (separate story)
- Figma plugin integration

---

## Related Files

- `video_window_flutter/lib/presentation/theme/app_colors.dart`
- `video_window_flutter/lib/presentation/theme/app_typography.dart`
- `video_window_flutter/lib/presentation/theme/app_spacing.dart`
- `video_window_flutter/lib/presentation/theme/app_theme.dart`
- `docs/architecture/coding-standards.md`

---

## Testing Requirements

### Unit Tests
- Token value correctness
- Theme switching logic
- Accessibility helpers

### Widget Tests
- Sample screens render correctly with tokens
- Theme switching updates all widgets
- Dark mode contrast verification

### Integration Tests
- End-to-end theme persistence
- System theme detection and auto-switching

**Minimum Coverage:** 85%

---

## Notes

**Design Notes:** Reference design system in Figma [link TBD]. Craft-forward aesthetic with neutral backdrops and high-contrast typography.

**Technical Notes:** Use Material 3 theming as foundation but customize heavily. Avoid Material widgets where custom design diverges significantly.

**Accessibility Notes:** Test with VoiceOver/TalkBack to ensure semantic labels work with token-based designs.

---

## Change Log

| Date | Version | Changes | Author |
|------|---------|---------|--------|
| 2025-10-30 | 1.0 | Initial story creation | Bob (Scrum Master) |
