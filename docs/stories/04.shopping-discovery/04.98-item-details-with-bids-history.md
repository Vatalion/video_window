# 04.98 — Item Details with Bids History

Status: Draft → InProgress → Ready for Review → Done

## Summary
Present an item details page linked from the feed overlay that shows the current auction state and a chronological list of bids with masked bidder identity.

## Acceptance Criteria
- Navigating from feed overlay opens the item details page.
- If an auction exists, show active state (timer) and current highest bid; otherwise, show "No active auction".
- Bids history lists entries with amount, masked bidder handle, and timestamp, ordered descending by time.
- Realtime updates reflect new bids within ≤2s (polling acceptable ≤10s in pilot).
- Error states and empty states are clear and actionable.

## Telemetry
- item_details_viewed, bids_list_viewed, auction_state_changed, error_toast_shown.

## Notes
- Respect feature flag; hide auction info when disabled.

## Files/Areas Impacted
- Item details screen
- Auction API integration (GET auction)
- Realtime/polling wiring

## Definition of Done
- Item details shows correct auction state (active/none) with timer where applicable.
- Bids history loads and updates in near real time; empty/error states polished.
- Region/feature flags respected; UA-only gating enforced.
- Telemetry events emit per schema; dashboards reflect views and state changes.
- Accessibility: readable amounts, proper semantics for lists/timers.
- Code formatted, analyzed; tests added for rendering and state updates.

## Dev tasks
- Implement details view layout with auction banner (badge/timer) and bids list.
- Integrate GET auction endpoint; model mapping and error handling.
- Wire realtime updates (WS) with polling fallback; reconcile list updates.
- Apply region/flag checks; navigate from feed overlay correctly.
- Emit item_details_viewed, bids_list_viewed, auction_state_changed.

## QA checklist
- Navigation from feed opens correct item details with overlay state.
- Active auction shows current highest bid and timer; no auction shows proper empty state.
- Bids append correctly in order; realtime/polling updates within expected SLA.
- UA-only gating; feature flag off hides auction sections.
- Analytics events received with correct payloads.