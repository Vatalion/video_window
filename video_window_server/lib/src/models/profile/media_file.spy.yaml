# MediaFile model for Story 3-2: Avatar & Media Upload System
# AC2: Virus scanning pipeline - persist scan status in media_files
# AC3: Image processing - stores S3 object under profile-media/{userId}/avatar.webp

class: MediaFile
table: media_files
fields:
  id:
    type: int
    databaseType: bigint
  userId:
    type: int
    databaseType: bigint
  type:
    type: String
    databaseType: text
  originalFileName:
    type: String
    databaseType: text
  s3Key:
    type: String
    databaseType: text
  cdnUrl:
    type: String?
    databaseType: text
    nullable: true
  mimeType:
    type: String
    databaseType: text
  fileSizeBytes:
    type: int
    databaseType: integer
  metadata:
    type: Map<String, dynamic>
    databaseType: jsonb
  status:
    type: String
    databaseType: text
  isVirusScanned:
    type: bool
    databaseType: boolean
  createdAt:
    type: DateTime
    databaseType: timestamp
  updatedAt:
    type: DateTime
    databaseType: timestamp

